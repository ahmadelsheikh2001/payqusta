# ═══════════════════════════════════════════════════════════
# PayQusta - Environment Variables Configuration
# ═══════════════════════════════════════════════════════════
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!
# ═══════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────
# Server Configuration
# ─────────────────────────────────────────────────────────
NODE_ENV=development
PORT=5000

# ─────────────────────────────────────────────────────────
# Database Configuration (MongoDB)
# ─────────────────────────────────────────────────────────
# Local MongoDB
MONGODB_URI=mongodb://localhost:27017/payqusta

# MongoDB Atlas (Cloud) - Uncomment to use
# MONGODB_URI=mongodb+srv://<username>:<password>@cluster.mongodb.net/payqusta?retryWrites=true&w=majority

# ─────────────────────────────────────────────────────────
# JWT Configuration
# ─────────────────────────────────────────────────────────
# Generate a strong random secret: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=30d

# ─────────────────────────────────────────────────────────
# Frontend URL (CORS)
# ─────────────────────────────────────────────────────────
CLIENT_URL=http://localhost:5173

# ─────────────────────────────────────────────────────────
# Email Configuration (Nodemailer)
# ─────────────────────────────────────────────────────────
# Gmail Example
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-specific-password

# Email Sender Info
EMAIL_FROM=PayQusta <noreply@payqusta.com>

# ─────────────────────────────────────────────────────────
# WhatsApp Business API (Meta)
# ─────────────────────────────────────────────────────────
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id
WHATSAPP_VERIFY_TOKEN=your-verify-token-for-webhooks

# WhatsApp Templates (Must be approved by Meta)
# - invoice_notification
# - customer_statement
# - payment_reminder
# - restock_request
# - payment_received

# ─────────────────────────────────────────────────────────
# File Upload Configuration
# ─────────────────────────────────────────────────────────
MAX_FILE_UPLOAD=5000000
FILE_UPLOAD_PATH=./uploads

# ─────────────────────────────────────────────────────────
# Rate Limiting
# ─────────────────────────────────────────────────────────
# General API rate limit (requests per 15 minutes)
RATE_LIMIT_API=100

# Auth endpoints rate limit (login attempts per 15 minutes)
RATE_LIMIT_AUTH=5

# Password reset rate limit (requests per hour)
RATE_LIMIT_PASSWORD_RESET=3

# ─────────────────────────────────────────────────────────
# Logging Configuration
# ─────────────────────────────────────────────────────────
LOG_LEVEL=info
LOG_FILE=./logs/payqusta.log

# ─────────────────────────────────────────────────────────
# Scheduled Jobs Configuration
# ─────────────────────────────────────────────────────────
# Installment reminder job (cron format: every day at 9 AM)
INSTALLMENT_REMINDER_CRON=0 9 * * *

# Stock monitor job (cron format: every 6 hours)
STOCK_MONITOR_CRON=0 */6 * * *

# ─────────────────────────────────────────────────────────
# Payment Gateways Configuration
# ─────────────────────────────────────────────────────────
# Application URL (for payment callbacks)
APP_URL=http://localhost:5173

# Paymob (Visa/Mastercard + Mobile Wallets)
PAYMOB_API_KEY=
PAYMOB_INTEGRATION_ID=
PAYMOB_IFRAME_ID=
PAYMOB_HMAC_SECRET=
PAYMOB_API_URL=https://accept.paymob.com/api
PAYMOB_ENABLED=false
PAYMOB_FEES=2.5

# Fawry (Cash payment at stores)
FAWRY_MERCHANT_CODE=
FAWRY_SECURITY_KEY=
FAWRY_API_URL=https://www.atfawry.com/fawrypay-api/api
FAWRY_ENABLED=false
FAWRY_FEES=1.5

# Vodafone Cash
VODAFONE_MERCHANT_ID=
VODAFONE_API_KEY=
VODAFONE_API_URL=https://api.vodafonecash.com.eg
VODAFONE_ENABLED=false
VODAFONE_FEES=2.0

# InstaPay
INSTAPAY_MERCHANT_ID=
INSTAPAY_API_KEY=
INSTAPAY_API_URL=https://api.instapay.com.eg
INSTAPAY_ENABLED=false
INSTAPAY_FEES=0.5

# Payment Settings
PAYMENT_FEES_ON_CUSTOMER=false
EARLY_PAYMENT_DISCOUNT=3
PAYMENT_LINK_EXPIRY_HOURS=24
PAYMENT_CURRENCY=EGP
PAYMENT_SUCCESS_URL=http://localhost:5173/payment/success
PAYMENT_FAILURE_URL=http://localhost:5173/payment/failure

# ═══════════════════════════════════════════════════════════
# Important Notes:
# ═══════════════════════════════════════════════════════════
# 1. NEVER commit .env file to Git
# 2. Use strong, unique values for JWT_SECRET and passwords
# 3. For production, set NODE_ENV=production
# 4. For Gmail, use App-Specific Passwords (not your account password)
# 5. WhatsApp templates must be approved by Meta before use
# 6. Keep this file updated when adding new environment variables
# 7. Payment gateway credentials from sandbox accounts for testing
# ═══════════════════════════════════════════════════════════
